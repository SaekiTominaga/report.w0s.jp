{
	"$schema": "http://json-schema.org/draft-07/schema#",
	"$id": "https://schema.w0s.jp/Report.json",
	"type": "object",
	"title": "report.w0s.jp",
	"required": ["port", "static", "response", "views", "errorpage", "logger", "mail", "js", "referrer"],
	"properties": {
		"port": {
			"type": "integer",
			"minimum": 1,
			"maximum": 65535,
			"title": "HTTP サーバーのポート番号"
		},
		"static": {
			"type": "object",
			"title": "静的ファイル",
			"required": ["root", "options"],
			"properties": {
				"root": {
					"type": "string",
					"title": "ルートディレクトリ"
				},
				"options": {
					"type": "object",
					"title": "オプション",
					"description": "https://expressjs.com/ja/4x/api.html#express.static",
					"required": [],
					"properties": {
						"dotfiles": {
							"type": "integer",
							"title": "dotfiles",
							"description": "Determines how dotfiles (files or directories that begin with a dot “.”) are treated."
						},
						"etag": {
							"type": "boolean",
							"title": "etag",
							"description": "Enable or disable etag generation"
						},
						"extensions": {
							"type": "array",
							"items": {
								"type": "string"
							},
							"title": "extensions",
							"description": "Sets file extension fallbacks: If a file is not found, search for files with the specified extensions and serve the first one found. Example: ['html', 'htm']."
						},
						"fallthrough": {
							"type": "boolean",
							"title": "fallthrough",
							"description": "Let client errors fall-through as unhandled requests, otherwise forward a client error."
						},
						"immutable": {
							"type": "boolean",
							"title": "immutable",
							"description": "Enable or disable the immutable directive in the Cache-Control response header. If enabled, the maxAge option should also be specified to enable caching. The immutable directive will prevent supported clients from making conditional requests during the life of the maxAge option to check if the file has changed."
						},
						"index": {
							"type": "array",
							"items": {
								"type": "string"
							},
							"title": "index",
							"description": "Sends the specified directory index file. Set to false to disable directory indexing."
						},
						"last_modified": {
							"type": "boolean",
							"title": "last_modified",
							"description": "Set the Last-Modified header to the last modified date of the file on the OS."
						},
						"max_age": {
							"type": "string",
							"title": "max_age",
							"description": "Set the max-age property of the Cache-Control header in milliseconds or a string in ms format."
						},
						"redirect": {
							"type": "boolean",
							"title": "redirect",
							"description": "Redirect to trailing “/” when the pathname is a directory."
						},
						"set_headers": {
							"type": "object",
							"title": "set_headers",
							"description": "Function for setting HTTP headers to serve with the file."
						}
					},
					"additionalProperties": false
				}
			},
			"additionalProperties": false
		},
		"response": {
			"type": "object",
			"title": "レスポンス",
			"required": ["mime", "header"],
			"properties": {
				"mime": {
					"type": "object",
					"title": "MIME と拡張子の紐付け"
				},
				"header": {
					"type": "object",
					"title": "レスポンスヘッダー",
					"required": ["hsts", "csp"],
					"properties": {
						"hsts": {
							"type": "string",
							"title": "Strict-Transport-Security"
						},
						"csp": {
							"type": "string",
							"title": "Content-Security-Policy (HTML 以外)"
						}
					},
					"additionalProperties": false
				}
			},
			"additionalProperties": false
		},
		"views": {
			"type": "string",
			"title": "テンプレートディレクトリ"
		},
		"errorpage": {
			"type": "object",
			"title": "エラーページ",
			"required": ["path_403", "path_404"],
			"properties": {
				"path_403": {
					"type": "string",
					"title": "Filepath for `403 Forbidden`"
				},
				"path_404": {
					"type": "string",
					"title": "Filepath for `404 Not Found`"
				}
			},
			"additionalProperties": false
		},
		"logger": {
			"type": "object",
			"title": "Logger",
			"required": ["path"],
			"properties": {
				"path": {
					"type": "string",
					"title": "ファイルパス"
				}
			},
			"additionalProperties": false
		},
		"mail": {
			"type": "object",
			"title": "管理者への通知に使用する E-mail の各種情報",
			"required": ["smtp", "user", "password", "port", "from", "to"],
			"properties": {
				"smtp": {
					"type": "string"
				},
				"user": {
					"type": "string"
				},
				"password": {
					"type": "string"
				},
				"port": {
					"type": "integer",
					"minimum": 0
				},
				"from": {
					"type": "string"
				},
				"to": {
					"type": "string"
				}
			},
			"additionalProperties": false
		},
		"js": {
			"type": "object",
			"title": "JavaScript エラー",
			"required": ["allow_origins", "mail"],
			"properties": {
				"allow_origins": {
					"type": "array",
					"items": {
						"type": "string"
					},
					"title": "許可するオリジン"
				},
				"mail": {
					"type": "object",
					"title": "通知メール",
					"required": ["title", "view"],
					"properties": {
						"title": {
							"type": "string",
							"title": "通知メールのタイトル"
						},
						"view": {
							"type": "string",
							"title": "view ファイル名"
						}
					},
					"additionalProperties": false
				}
			},
			"additionalProperties": false
		},
		"referrer": {
			"type": "object",
			"title": "リファラーエラー",
			"required": ["allow_origins", "mail"],
			"properties": {
				"allow_origins": {
					"type": "array",
					"items": {
						"type": "string"
					},
					"title": "許可するオリジン"
				},
				"mail": {
					"type": "object",
					"title": "通知メール",
					"required": ["title", "view"],
					"properties": {
						"title": {
							"type": "string",
							"title": "通知メールのタイトル"
						},
						"view": {
							"type": "string",
							"title": "view ファイル名"
						}
					},
					"additionalProperties": false
				}
			},
			"additionalProperties": false
		}
	},
	"additionalProperties": false
}
