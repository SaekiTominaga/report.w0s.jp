{
	"$schema": "http://json-schema.org/draft-07/schema#",
	"$id": "https://schema.w0s.jp/report.json",
	"type": "object",
	"title": "report.w0s.jp",
	"required": ["port", "response", "static", "views", "errorpage", "logger", "mail", "js", "referrer"],
	"properties": {
		"port": {
			"type": "integer",
			"minimum": 1,
			"maximum": 65535,
			"title": "HTTP サーバーのポート番号"
		},
		"response": {
			"type": "object",
			"title": "レスポンス",
			"required": ["header"],
			"properties": {
				"header": {
					"type": "object",
					"title": "レスポンスヘッダー",
					"required": ["hsts", "csp"],
					"properties": {
						"hsts": {
							"type": "string",
							"title": "Strict-Transport-Security"
						},
						"csp": {
							"type": "string",
							"title": "Content-Security-Policy (HTML 以外)"
						}
					},
					"additionalProperties": false
				}
			},
			"additionalProperties": false
		},
		"static": {
			"type": "object",
			"title": "静的ファイル",
			"required": ["root", "headers"],
			"properties": {
				"root": {
					"type": "string",
					"title": "ルートディレクトリ"
				},
				"extensions": {
					"type": "array",
					"items": {
						"type": "string"
					},
					"title": "ファイル拡張子のフォールバック（拡張子に . は付けない）"
				},
				"indexes": {
					"type": "array",
					"items": {
						"type": "string"
					},
					"title": "ディレクトリのインデックスファイル名"
				},
				"headers": {
					"type": "object",
					"title": "レスポンスヘッダー関連",
					"required": ["mime"],
					"properties": {
						"mime": {
							"type": "object",
							"required": ["path", "extension"],
							"title": "MIME 定義",
							"properties": {
								"path": {
									"type": "object",
									"title": "MIME とファイルパスの紐付け"
								},
								"extension": {
									"type": "object",
									"title": "MIME と拡張子の紐付け"
								}
							},
							"additionalProperties": false
						},
						"cache_control": {
							"type": "object",
							"required": ["default", "path", "extension"],
							"title": "キャッシュ定義",
							"properties": {
								"default": {
									"type": "string",
									"title": "デフォルト値"
								},
								"path": {
									"type": "array",
									"items": {
										"type": "object",
										"required": ["paths", "value"],
										"properties": {
											"paths": {
												"type": "array",
												"items": {
													"type": "string"
												},
												"title": "拡張子"
											},
											"value": {
												"type": "string",
												"title": "値"
											}
										},
										"additionalProperties": false
									},
									"title": "ファイルパスによるキャッシュ定義"
								},
								"extension": {
									"type": "array",
									"items": {
										"type": "object",
										"required": ["extensions", "value"],
										"properties": {
											"extensions": {
												"type": "array",
												"items": {
													"type": "string"
												},
												"title": "拡張子"
											},
											"value": {
												"type": "string",
												"title": "値"
											}
										},
										"additionalProperties": false
									},
									"title": "拡張子によるキャッシュ定義"
								}
							},
							"additionalProperties": false
						}
					},
					"additionalProperties": false
				}
			},
			"additionalProperties": false
		},
		"views": {
			"type": "string",
			"title": "テンプレートディレクトリ"
		},
		"errorpage": {
			"type": "object",
			"title": "エラーページ",
			"required": ["path_403", "path_404"],
			"properties": {
				"path_403": {
					"type": "string",
					"title": "Filepath for `403 Forbidden`"
				},
				"path_404": {
					"type": "string",
					"title": "Filepath for `404 Not Found`"
				}
			},
			"additionalProperties": false
		},
		"logger": {
			"type": "object",
			"title": "Logger",
			"required": ["path"],
			"properties": {
				"path": {
					"type": "string",
					"title": "ファイルパス"
				}
			},
			"additionalProperties": false
		},
		"mail": {
			"type": "object",
			"title": "管理者への通知に使用する E-mail の各種情報",
			"required": ["smtp", "user", "password", "port", "from", "to"],
			"properties": {
				"smtp": {
					"type": "string"
				},
				"user": {
					"type": "string"
				},
				"password": {
					"type": "string"
				},
				"port": {
					"type": "integer",
					"minimum": 0
				},
				"from": {
					"type": "string"
				},
				"to": {
					"type": "string"
				}
			},
			"additionalProperties": false
		},
		"js": {
			"type": "object",
			"title": "JavaScript エラー",
			"required": ["allow_origins", "mail"],
			"properties": {
				"allow_origins": {
					"type": "array",
					"items": {
						"type": "string"
					},
					"title": "許可するオリジン"
				},
				"mail": {
					"type": "object",
					"title": "通知メール",
					"required": ["title", "view"],
					"properties": {
						"title": {
							"type": "string",
							"title": "通知メールのタイトル"
						},
						"view": {
							"type": "string",
							"title": "view ファイル名"
						}
					},
					"additionalProperties": false
				}
			},
			"additionalProperties": false
		},
		"referrer": {
			"type": "object",
			"title": "リファラーエラー",
			"required": ["allow_origins", "mail"],
			"properties": {
				"allow_origins": {
					"type": "array",
					"items": {
						"type": "string"
					},
					"title": "許可するオリジン"
				},
				"mail": {
					"type": "object",
					"title": "通知メール",
					"required": ["title", "view"],
					"properties": {
						"title": {
							"type": "string",
							"title": "通知メールのタイトル"
						},
						"view": {
							"type": "string",
							"title": "view ファイル名"
						}
					},
					"additionalProperties": false
				}
			},
			"additionalProperties": false
		}
	},
	"additionalProperties": false
}
